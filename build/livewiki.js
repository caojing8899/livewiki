!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n,i,o,s;i=r(1),n=r(2),o=r(3),r(4),r(10),r(7),r(8),r(9),r(6),r(5),(s=function(t){return"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)})(function(){var t,e;return e=!1,document.addEventListener("keyup",function(t){return function(t){if((27===t.which||91===t.which||93===t.which||17===t.which||t.ctrlKey)&&!e)return n.prototype.remove_container()}}(this)),document.querySelector("body").addEventListener("click",function(t){return n.prototype.remove_container()}),t=document.querySelectorAll('a[href^="/wiki/"]:not(.new)'),Array.prototype.forEach.call(t,function(t,r){var n;return n="",t.addEventListener("mouseover",function(t){var r;return e=!0,r=t.target.getAttribute("href"),n=new o(r),document.addEventListener("keyup",n.display),n.preload().then(function(t){},function(t){return console.log(t)})}),t.addEventListener("mouseout",function(t){return e=!1,document.removeEventListener("keyup",n.display)})})})},function(t,e){var r,n,i=function(t,e){return function(){return t.apply(e,arguments)}};n={selectors:{wikipedia:{headline:"#firstHeading",paragraph:"#mw-content-text > p",image:".thumbimage"},term:".livewiki_term",cover:".term__cover",close_button:"button",headline:".headline",headline_overlay:".headline__overlay",paragraph:".term__content",image:".term__image",spinner:".spinner",spinner_image:".spinner__image"}},r=function(){function t(t){this.get_terms=i(this.get_terms,this),this.options={},this.container_element="",Object.assign(this.options,n,t)}return t.prototype.add_term=function(t){return this.terms.push(t)},t.prototype.get_terms=function(){return this.terms},t}(),t.exports=r},function(t,e,r){var n,i,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function r(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;i=r(1),n=function(t){function e(){this.find_element=o(this.find_element,this);var t,r;return e.__super__.constructor.call(this),this.container_element="",t=document.querySelector("body"),r=this.find_or_create(),r.id="livewiki",r.addEventListener("click",function(t){return function(t){return t.stopPropagation()}}(this)),r.addEventListener("mouseover",function(e){return function(r){var n;if(n=document.querySelector(e.options.selectors.paragraph),r.target.classList.contains(e.options.selectors.paragraph.substr(1))&&n.clientHeight>=200)return t.style.overflow="hidden"}}(this)),r.addEventListener("mouseout",function(e){return function(r){if(r.target.classList.contains(e.options.selectors.paragraph.substr(1)))return t.style.overflow="scroll"}}(this)),document.querySelector("body").appendChild(r),r}return s(e,t),e.prototype.find_or_create=function(){return this.container_element=this.find_element(),this.container_element||(this.container_element=document.createElement("div")),this.container_element},e.prototype.find_element=function(){return document.querySelector("#livewiki")},e.prototype.remove_container=function(){var t;if(t=this.find_element())return t.remove()},e.prototype.remove_terms=function(){var t;if(t=this.find_element())return t.innerHTML=""},e}(i),t.exports=n},function(t,e,r){var n,i,o,s,u,c,a=function(t,e){return function(){return t.apply(e,arguments)}},l=function(t,e){function r(){this.constructor=t}for(var n in e)p.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=new DOMParser,i=r(1),n=r(2),c=r(11),o=function(t){function e(t){this.display_term=a(this.display_term,this),this.set_values=a(this.set_values,this),this.to_html=a(this.to_html,this),this.html_element=a(this.html_element,this),this.update_html=a(this.update_html,this),this.remove_term=a(this.remove_term,this),this.display=a(this.display,this),this.preload=a(this.preload,this),e.__super__.constructor.call(this),this.link=t,this.loaded=!1,this.displayed=!1,this.container=new n,this.headline="",this.paragraph="",this.image_src=""}return l(e,t),e.prototype.preload=function(){return new Promise(function(t){return function(e,r){var n;return t.html_element()?(e(t),!1):(n=new XMLHttpRequest,n.open("GET",t.link,!0),n.onload=function(){var i,o,s,c,a;return 200===n.status?(c=n.responseText,a=u.parseFromString(c,"text/html"),i=a.querySelector(t.options.selectors.wikipedia.headline),t.headline=i?i.textContent:"Error",s=a.querySelector(t.options.selectors.wikipedia.paragraph),s&&s.textContent.length>5?t.paragraph=s.textContent:s||(s=a.querySelector("p"),t.paragraph=s?s.textContent:t.paragraph="Sorry, we couldn't crawl that page."),o=a.querySelector(t.options.selectors.wikipedia.image),o&&(t.image_src=o.getAttribute("src")),t.displayed&&t.update_html(),t.display_term(document),t.loaded=!0,e(t)):r(Error("Term didn't load successfully; error code: "+n.statusText))},n.onerror=function(){return r(Error("There was a network error."))},n.send())}}(this))},e.prototype.display=function(t){return!this.html_element()&&(n.prototype.remove_terms(),91===t.which||93===t.which||17===t.which?this.append():void 0)},e.prototype.append=function(){var t;return t=this.to_html(),this.loaded&&this.display_term(t),this.displayed=!0,this.container.appendChild(t)},e.prototype.remove_term=function(){return this.html_element().remove()},e.prototype.update_html=function(){var t;return t=this.html_element(),this.set_values(t)},e.prototype.html_element=function(){return document.querySelector("[data-href='"+encodeURIComponent(this.link)+"']")},e.prototype.to_html=function(){var t,e,r,n,i,o,s,a,l;return l=u.parseFromString(c,"text/html"),t=l.querySelector(this.options.selectors.close_button),r=l.querySelector(this.options.selectors.term),e=l.querySelector(this.options.selectors.cover),n=l.querySelector(this.options.selectors.headline),i=l.querySelector(this.options.selectors.headline_overlay),o=l.querySelector(this.options.selectors.image),a=l.querySelector(this.options.selectors.spinner_image),a.setAttribute("src",chrome.extension.getURL("spinner.gif")),this.set_values(l),this.image_src?(o.src=this.image_src,e.classList.add("cover--default_size")):null!==(s=this.image_src)&&""!==s||(n.classList.add("color--black"),o.remove(),i.remove()),t.addEventListener("click",this.remove_term),r.setAttribute("data-href",encodeURIComponent(this.link)),r},e.prototype.set_values=function(t){var e,r,n;if(e=t.querySelector(this.options.selectors.headline),e&&(e.textContent=this.headline),n=t.querySelector(this.options.selectors.paragraph),n&&(n.textContent=this.paragraph),r=t.querySelector(this.options.selectors.image),r&&this.image_src)return r.src=this.image_src},e.prototype.display_term=function(t){var e,r,n;if(this.displayed=!0,e=t.querySelector(this.options.selectors.cover),e&&e.classList.remove("element--hidden"),r=t.querySelector(this.options.selectors.paragraph),r&&r.classList.remove("element--hidden"),n=t.querySelector(this.options.selectors.spinner))return n.classList.add("element--hidden")},e}(i),s=function(t,e,r){for(;t.parentElement;)if(t=t.parentElement,t.tagName.toLowerCase()===e.toLowerCase()&&t.classList.contains(r))return t},t.exports=o},function(t,e){},function(t,e,r){t.exports=r.p+"manifest.json"},function(t,e,r){t.exports=r.p+"src/icons/black/128x128.png"},function(t,e,r){t.exports=r.p+"src/icons/black/16x16.png"},function(t,e,r){t.exports=r.p+"src/icons/black/32x32.png"},function(t,e,r){t.exports=r.p+"src/icons/black/48x48.png"},function(t,e,r){t.exports=r.p+"src/img/spinner.gif"},function(t,e){t.exports='<div class=livewiki_term data-href=""> <div class=term__header> <h2 class=livewiki__logo> <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA1MDAgODQuMyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTAwIDg0LjMiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnPgoJCTxwYXRoIGZpbGw9IiMzQTNBM0EiIGQ9Ik01LjEsNjQuOGg4LjJWMTkuMUg1LjFWNC43SDQwdjE0LjRoLTguMnY0NC43aDE1LjhWNTNINjN2MjUuMkg1LjFWNjQuOHoiLz4KCQk8cGF0aCBmaWxsPSIjM0EzQTNBIiBkPSJNNzMuNiw2NS4zaDYuN1YzOC4xaC03LjJWMjUuMmgyNXY0MC4xaDYuN3YxMi45SDczLjZWNjUuM3ogTTgwLjUsNC43aDE3LjR2MTMuOUg4MC41VjQuN3oiLz4KCQk8cGF0aCBmaWxsPSIjM0EzQTNBIiBkPSJNMTExLjksMjUuMkgxNDB2MTIuOWgtNC43bDYuMSwxOS4xYzEuMSwzLjIsMS40LDcsMS40LDdoMC40YzAsMCwwLjMtMy44LDEuNC03bDYuMS0xOS4xSDE0NlYyNS4yaDI4LjIKCQkJdjEyLjloLTZsLTE0LjcsNDAuMWgtMjFsLTE0LjctNDAuMWgtNlYyNS4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzQTNBM0EiIGQ9Ik0yMDkuMywyNGMxNS44LDAsMjQuNywxMC45LDI0LjcsMjUuNmMwLDEuNy0wLjQsNS4zLTAuNCw1LjNIMjAwYzEuMyw2LjgsNi43LDkuOCwxMi4zLDkuOAoJCQljNy44LDAsMTQuOS01LDE0LjktNWw2LjUsMTIuM2MwLDAtOC41LDcuNC0yMi44LDcuNGMtMTguOSwwLTI5LjEtMTMuNy0yOS4xLTI3LjhDMTgxLjgsMzYuMSwxOTIuMywyNCwyMDkuMywyNHogTTIxNS42LDQ1LjIKCQkJYzAtNC4yLTIuOC03LjgtNi43LTcuOGMtNS4xLDAtNy42LDMuNy04LjUsNy44SDIxNS42eiIvPgoJCTxwYXRoIGZpbGw9IiMzQTNBM0EiIGQ9Ik0yMzguNyw0LjdoMzIuNlYxOGgtOC41bDYuOCwzMi42YzAuNywzLjYsMC45LDcuNywwLjksNy43aDAuNGMwLDAsMC4zLTQuMSwxLjItNy43bDExLjMtNDZoMTQuMmwxMS4zLDQ2CgkJCWMwLjksMy42LDEuMiw3LjcsMS4yLDcuN2gwLjRjMCwwLDAuMi00LjEsMC45LTcuN2w2LjgtMzIuNmgtOC41VjQuN2gzMi42VjE4aC02LjJsLTE0LjYsNjAuMWgtMjAuM0wyOTIsNDAuNQoJCQljLTAuOS0zLjYtMS4yLTguMS0xLjItOC4xaC0wLjRjMCwwLTAuMyw0LjUtMS4yLDguMWwtOS40LDM3LjZoLTIwLjNMMjQ0LjksMThoLTYuMlY0Ljd6Ii8+CgkJPHBhdGggZmlsbD0iIzNBM0EzQSIgZD0iTTM1MC43LDY1LjNoNi43VjM4LjFoLTcuMlYyNS4yaDI1djQwLjFoNi43djEyLjloLTMxLjJWNjUuM3ogTTM1Ny42LDQuN0gzNzV2MTMuOWgtMTcuNFY0Ljd6Ii8+CgkJPHBhdGggZmlsbD0iIzNBM0EzQSIgZD0iTTM5MS43LDY1LjNoNi43VjE3LjVoLTcuMlY0LjdoMjV2NDAuMmg2LjFsNS42LTYuOGgtNVYyNS4yaDI3LjZ2MTIuOWgtNi41bC05LjIsMTEuMXYwLjIKCQkJYzAsMCwyLjMsMS4xLDQuMiw0LjdsNS4yLDkuNWMwLjgsMS40LDEuOSwxLjcsMy45LDEuN2gyLjZ2MTIuOWgtMTNjLTMuOCwwLTUuOC0wLjYtNy42LTRsLTguMS0xNWMtMC45LTEuNy0yLjktMS43LTQuMi0xLjdoLTEuNQoJCQl2Ny45aDMuOHYxMi45aC0yOC4zVjY1LjN6Ii8+CgkJPHBhdGggZmlsbD0iIzNBM0EzQSIgZD0iTTQ2Mi40LDY1LjNoNi43VjM4LjFoLTcuMlYyNS4yaDI1djQwLjFoNi43djEyLjloLTMxLjJWNjUuM3ogTTQ2OS4zLDQuN2gxNy40djEzLjloLTE3LjRWNC43eiIvPgoJPC9nPgo8L2c+Cjwvc3ZnPgo="/> </h2> <button class="header__icon term--close">CLOSE</button> </div> <div class=spinner> <img class=spinner__image alt=Loading> </div> <div class="term__cover element--hidden"> <h1 class=headline></h1> <div class=headline__overlay></div> <img class=term__image> </div> <p class="term__content element--hidden"></p> </div>'}]);